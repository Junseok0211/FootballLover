<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>풋볼러버 메뉴</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/4.3/examples/blog/">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <!-- Jquery CDN -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <!-- Bootstrap core CSS -->
    <link href="/docs/4.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.2.1.js"></script>
    <link rel="stylesheet" href="/css/jquery-ui.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.5.0/css/bootstrap-datepicker3.min.css">
    <script type='text/javascript' src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.5.0/js/bootstrap-datepicker.min.js"></script>
    <script src="/js/bootstrap-datepicker.kr.js" charset="UTF-8"></script>

    <!-- XDSoft DateTimePicker -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.min.css"
        integrity="sha256-DOS9W6NR+NFe1fUhEE0PGKY/fubbUCnOfTje2JMDw3Y=" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.full.min.js"
        integrity="sha256-FEqEelWI3WouFOo2VWP/uJfs1y8KJ++FLh2Lbqc8SJk=" crossorigin="anonymous"></script>

    <!-- font awesome -->
    <script src="https://kit.fontawesome.com/8b80c27e4f.js" crossorigin="anonymous"></script>

    <!-- google font Do Hyeon Nanum Gothic Black Han Sans -->
    <!-- font-family: 'Black Han Sans', sans-serif;
    font-family: 'Nanum Gothic', sans-serif;
    font-family: 'Do Hyeon', sans-serif;
    font-family: 'Noto Sans KR', sans-serif;
    font-family: 'Nanum Myeongjo', serif;
    font-family: 'Gothic A1', sans-serif;
    font-family: 'Sunflower', sans-serif;
    font-family: 'Nanum Gothic Coding', monospace;
    font-family: 'Nanum Pen Script', cursive;
    font-family: 'Nanum Brush Script', cursive;
    font-family: 'Song Myung', serif;
    font-family: 'Noto Serif KR', serif;
    font-family: 'Jua', sans-serif;
    font-family: 'Dokdo', cursive;
    font-family: 'Cute Font', cursive;
    font-family: 'Stylish', sans-serif;
    font-family: 'Poor Story', cursive;
    font-family: 'Hi Melody', cursive;
    font-family: 'Gaegu', cursive;
    font-family: 'Gamja Flower', cursive;
    font-family: 'Kirang Haerang', cursive;
    font-family: 'East Sea Dokdo', cursive;
    font-family: 'Black And White Picture', sans-serif;
    font-family: 'Single Day', cursive;
    font-family: 'Yeon Sung', cursive; -->
    <link href="https://fonts.googleapis.com/css?family=Black+And+White+Picture|Black+Han+Sans|Cute+Font|Do+Hyeon|Dokdo|East+Sea+Dokdo|Gaegu|Gamja+Flower|Gothic+A1|Hi+Melody|Jua|Kirang+Haerang|Nanum+Brush+Script|Nanum+Gothic|Nanum+Gothic+Coding|Nanum+Myeongjo|Nanum+Pen+Script|Noto+Sans+KR|Noto+Serif+KR|Poor+Story|Single+Day|Song+Myung|Stylish|Sunflower:300|Yeon+Sung&display=swap"
        rel="stylesheet">

    <!-- base.css -->
    <link rel="stylesheet" type="text/css" href="{% static 'account/css/base.css' %}" />

    <link rel="stylesheet" type="text/css" href="{% static 'css/base.css' %}"/>

    <!-- js파일 -->
    <script src="{% static 'js/home.js' %}" type="text/javascript"></script>
    <script src="{% static 'account/js/register.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/notification.js' %}" type="text/javascript"></script>

    <style>
        .alarmDesign{
            max-width: 720px;
            width: 100%;
            margin: 0 auto;
            padding: 10px;
            padding-top: 0px;
        }

        .alarmText{
            padding:10px;
            font-family: 'Nanum Gothic';
        }
        /* Links inside the dropdown */
        .alarmDesign a {
            color: black;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            font-size: 12px;
        }
        
        /* Change color of dropdown links on hover */
        .alarmDesign a:hover {background-color: #ddd}

        .pc{
        display: block;
      }
    
      .mobile{
        display: none;
      }
    
      @media only screen and (max-device-width : 720px) {
        .pc{
          display: none;
        }
        .mobile{
          display: block;
        }
    }
    
    </style>
    <script type="text/javascript">
            function checkAllNotification() {
            var url = "{% url 'checkAllNotification' %}"
            $.ajax({
                url: url,
                dataType: 'json',
                type: 'GET',
                async: false,
                success: function (data) {}
            });
            location.reload();
            return true;
        }



        function checkNotification(notification_id) {
            var id = notification_id;
            var url = "{% url 'checkNotification' 0 %}";
            $.ajax({
                url: url.replace('0', id),
                dataType: 'json',
                type: 'GET',
                async: false,
                success: function (data) {}
            });

            return true;
        }
    </script>
</head>
<body>

    <div class="mobile">
      {% include 'navBar.html' %}
    </div>
    
    <span class="pc">
    {% include 'pcNavBar.html' %}
    </span>
    <div class="alarmDesign">
        <div class="pl-3 pb-2 pt-2" style="border-bottom: black 1px solid;">
            <span style="font-size: 18px; font-weight: bold; color: cornflowerblue;" class="mr-3">알림</span>
            <button class="p-2 m-1 btn" onclick="return checkAllNotification()" style="background-color:lightgrey; font-size: 12px; font-weight: bold; color: black;">모두 읽은 상태로 표시</button>
        </div>
        {% if not notificationList  %}
            <p class = "alarmText">알람이 없습니다.</p>
        {% else %}
        {% for alarm in notificationList %}
        <!-- 알람creator가 자신이면 안보이게. -->
        {% if alarm.creator != fnsuser %}
            <!-- 확인을 했다면. -->
            {% if alarm.userCheck %}
            <!-- 알람 종류 -->
            {% if alarm.notification_type == "prComment" %}
            <a href="{% url 'personalDetail' alarm.personalMatching.id %}">{{alarm.text}}</a>
            
            {% elif alarm.notification_type == "teamComment" %}
            <a href="{% url 'teamMatching_detail' alarm.teamMatching.id %}">{{alarm.text}}</a>
            
            {% elif alarm.notification_type == "recruitingComment" %}
            <a href="{% url 'recruiting_detail' alarm.recruiting.id %}">{{alarm.text}}</a>
            
            {% elif alarm.notification_type == "leagueComment" %}
            <a href="{% url 'league_detail' alarm.league.id %}">{{alarm.text}}</a>

            {% elif alarm.notification_type == "personalApply" %}
            <a href="{% url 'personalDetail' alarm.personalMatching.id %}">{{alarm.text}}</a>

            {% elif alarm.notification_type == "teamMatchingApply" %}
            <a href="{% url 'teamMatching_detail' alarm.teamMatching.id %}">{{alarm.text}}</a>

            {% elif alarm.notification_type == "recruitingApply" %}
            <a href="{% url 'recruiting_detail' alarm.recruiting.id %}">{{alarm.text}}</a>
            
            {% elif alarm.notification_type == "recruitingAccepted" %}
            <a href="{% url 'recruiting_detail' alarm.recruiting.id %}">{{alarm.text}}</a>
            
            {% elif alarm.notification_type == "leaguePersonalApply" %}
            <a href="{% url 'league_detail' alarm.league.id %}">{{alarm.text}}</a>
            
            {% elif alarm.notification_type == "leagueTeamApply" %}
            <a href="{% url 'league_detail' alarm.league.id %}">{{alarm.text}}</a>
            
            {% elif alarm.notification_type == "joinTeam" %}
            <a href="{% url 'detail' alarm.team.id %}">{{alarm.text}}</a>

            {% elif alarm.notification_type == "teamAccepted" %}
            <a href="{% url 'detail' alarm.team.id %}">{{alarm.text}}</a>

            {% elif alarm.notification_type == "personalReply" %}
            <a href="{% url 'personalDetail' alarm.personalMatching.id %}">{{alarm.text}}</a>

            {% elif alarm.notification_type == "teamReply" %}
            <a href="{% url 'teamMatching_detail' alarm.teamMatching.id %}">{{alarm.text}}</a>

            {% elif alarm.notification_type == "recruitingReply" %}
            <a href="{% url 'recruiting_detail' alarm.recruiting.id %}">{{alarm.text}}</a>

            {% elif alarm.notification_type == "leagueReply" %}
            <a href="{% url 'league_detail' alarm.league.id %}">{{alarm.text}}</a>

            {% elif alarm.notification_type == "recruitingDenied" %}
            <a href="{% url 'recruiting_detail' alarm.recruiting.id %}">{{alarm.text}}</a>

            {% elif alarm.notification_type == "teamApplicationDenied" %}
            <a href="{% url 'detail' alarm.team.id %}">{{alarm.text}}</a>

            {% elif alarm.notification_type == "suggestTeamMatching" %}
            <a href="{% url 'detail' alarm.team.id %}">{{alarm.text}}</a>

            {% elif alarm.notification_type == "acceptSuggestion" %}
            <a href="{% url 'teamMatching_detail' alarm.teamMatching.id %}">{{alarm.text}}</a>

            {% elif alarm.notification_type == "resultInput" %}
            <a href="{% url 'decidedDetail' alarm.teamMatching.decidedMatch.id %}">{{alarm.text}}</a>

            {% elif alarm.notification_type == "resultEdit" %}
            <a href="{% url 'decidedDetail' alarm.teamMatching.decidedMatch.id %}">{{alarm.text}}</a>

            {% elif alarm.notification_type == "resultConfirm" %}
            <a href="{% url 'decidedDetail' alarm.teamMatching.decidedMatch.id %}">{{alarm.text}}</a>

            {% elif alarm.notification_type == "personalAccept" %}
            <a href="{% url 'personalDetail' alarm.personalMatching.id %}">{{alarm.text}}</a>

            {% elif alarm.notification_type == "personalDeny" %}
            <a href="{% url 'personalDetail' alarm.personalMatching.id %}">{{alarm.text}}</a>
            
            {% endif %}

            <!-- 확인을 안했다면 -->
            {% else %}
            <!-- 알람종류 -->
            {% if alarm.notification_type == "prComment" %}
            <a class="alarm" onclick="return checkNotification('{{alarm.id}}');" href="{% url 'personalDetail' alarm.personalMatching.id %}">{{alarm.text}}</a>
            
            {% elif alarm.notification_type == "teamComment" %}
            <a class="alarm" onclick="return checkNotification('{{alarm.id}}');" href="{% url 'teamMatching_detail' alarm.teamMatching.id %}">{{alarm.text}}</a>
            
            {% elif alarm.notification_type == "recruitingComment" %}
            <a class="alarm" onclick="return checkNotification('{{alarm.id}}');" href="{% url 'recruiting_detail' alarm.recruiting.id %}">{{alarm.text}}</a>
            
            {% elif alarm.notification_type == "leagueComment" %}
            <a class="alarm" onclick="return checkNotification('{{alarm.id}}');" href="{% url 'league_detail' alarm.league.id %}">{{alarm.text}}</a>

            {% elif alarm.notification_type == "personalApply" %}
            <a class="alarm" onclick="return checkNotification('{{alarm.id}}');" href="{% url 'personalDetail' alarm.personalMatching.id %}">{{alarm.text}}</a>

            {% elif alarm.notification_type == "teamMatchingApply" %}
            <div class="alarm" style="width:200px; text-overflow: ellipsis; max-width: 300px;">
            <a class="alarm" style="text-overflow: ellipsis;" onclick="return checkNotification('{{alarm.id}}');" href="{% url 'teamMatching_detail' alarm.teamMatching.id %}"><span style="width:200px; text-overflow: ellipsis; max-width: 200px;">{{alarm.text}}</span></a>
            </div>
            {% elif alarm.notification_type == "recruitingApply" %}
            <a class="alarm" onclick="return checkNotification('{{alarm.id}}');" href="{% url 'recruiting_detail' alarm.recruiting.id %}">{{alarm.text}}</a>
            
            {% elif alarm.notification_type == "recruitingAccepted" %}
            <a class="alarm" onclick="return checkNotification('{{alarm.id}}');" href="{% url 'recruiting_detail' alarm.recruiting.id %}">{{alarm.text}}</a>
            
            {% elif alarm.notification_type == "leaguePersonalApply" %}
            <a class="alarm" onclick="return checkNotification('{{alarm.id}}');" href="{% url 'league_detail' alarm.league.id %}">{{alarm.text}}</a>
            
            {% elif alarm.notification_type == "leagueTeamApply" %}
            <a class="alarm" onclick="return checkNotification('{{alarm.id}}');" href="{% url 'league_detail' alarm.league.id %}">{{alarm.text}}</a>
            
            {% elif alarm.notification_type == "joinTeam" %}
            <a class="alarm" onclick="return checkNotification('{{alarm.id}}');" href="{% url 'detail' alarm.team.id %}">{{alarm.text}}</a>

            {% elif alarm.notification_type == "teamAccepted" %}
            <a class="alarm" onclick="return checkNotification('{{alarm.id}}');" href="{% url 'detail' alarm.team.id %}">{{alarm.text}}</a>

            {% elif alarm.notification_type == "personalReply" %}
            <a class="alarm" onclick="return checkNotification('{{alarm.id}}');" href="{% url 'personalDetail' alarm.personalMatching.id %}">{{alarm.text}}</a>

            {% elif alarm.notification_type == "teamReply" %}
            <a class="alarm" onclick="return checkNotification('{{alarm.id}}');" href="{% url 'teamMatching_detail' alarm.teamMatching.id %}">{{alarm.text}}</a>

            {% elif alarm.notification_type == "recruitingReply" %}
            <a class="alarm" onclick="return checkNotification('{{alarm.id}}');" href="{% url 'recruiting_detail' alarm.recruiting.id %}">{{alarm.text}}</a>

            {% elif alarm.notification_type == "leagueReply" %}
            <a class="alarm" onclick="return checkNotification('{{alarm.id}}');" href="{% url 'league_detail' alarm.league.id %}">{{alarm.text}}</a>

            {% elif alarm.notification_type == "recruitingDenied" %}
            <a class="alarm" onclick="return checkNotification('{{alarm.id}}');" href="{% url 'recruiting_detail' alarm.recruiting.id %}">{{alarm.text}}</a>

            {% elif alarm.notification_type == "teamApplicationDenied" %}
            <a class="alarm" onclick="return checkNotification('{{alarm.id}}');" href="{% url 'detail' alarm.team.id %}">{{alarm.text}}</a>

            {% elif alarm.notification_type == "suggestTeamMatching" %}
            <a class="alarm" onclick="return checkNotification('{{alarm.id}}');" href="{% url 'detail' alarm.team.id %}">{{alarm.text}}</a>

            {% elif alarm.notification_type == "acceptSuggestion" %}
            <a class="alarm" onclick="return checkNotification('{{alarm.id}}');" href="{% url 'teamMatching_detail' alarm.teamMatching.id %}">{{alarm.text}}</a>
            
            {% elif alarm.notification_type == "resultInput" %}
            <a class="alarm" onclick="return checkNotification('{{alarm.id}}');" href="{% url 'decidedDetail' alarm.teamMatching.decidedMatch.id %}">{{alarm.text}}</a>

            {% elif alarm.notification_type == "resultEdit" %}
            <a class="alarm" onclick="return checkNotification('{{alarm.id}}');" href="{% url 'decidedDetail' alarm.teamMatching.decidedMatch.id %}">{{alarm.text}}</a>

            {% elif alarm.notification_type == "resultConfirm" %}
            <a class="alarm" onclick="return checkNotification('{{alarm.id}}');" href="{% url 'decidedDetail' alarm.teamMatching.decidedMatch.id %}">{{alarm.text}}</a>

            {% elif alarm.notification_type == "personalAccept" %}
            <a class="alarm" onclick="return checkNotification('{{alarm.id}}');" href="{% url 'personalDetail' alarm.personalMatching.id %}">{{alarm.text}}</a>

            {% elif alarm.notification_type == "personalDeny" %}
            <a class="alarm" onclick="return checkNotification('{{alarm.id}}');" href="{% url 'decidedDetail' alarm.personalMatching.id %}">{{alarm.text}}</a>

            {% endif %}
            <!-- 알람종류 끝 -->
            {% endif %}
            <!-- 확인 여부 끝 -->
        {% endif %}
        <!-- creator 자기인지 여부 끝 -->
        {% endfor %}
        <!-- for문 끝 -->
    {% endif %}
    <!-- notification 있는지 여부 끝 -->
    <!-- 페이지네이션 시작 -->
    <div style="border-top:black 1px solid;" class="pt-2">
        <nav aria-label="Page navigation example">
        <ul class="pagination justify-content-center d-flex" style="display:inline-block;">
            {% if notificationList.has_previous %}
            <li class="page-item" style="display:inline;">
            <a class="page-link" style ="display:inline-block;" href="?page=1" style ="display:inline-block;" tabindex="-1" aria-disabled="true">처음으로</a>
            </li>
            <li class="page-item" style ="display:inline-block;">
            <a class="page-link" style ="display:inline-block;" href="?page={{notificationList.previous_page_number}}" tabindex="-1" aria-disabled="true">{{notificationList.previous_page_number}}</a>
            </li>
            {% endif %}
            <li class="page-item disabled" style ="display:inline-block;"><a class="page-link" style ="display:inline-block;" href="#">{{notificationList.number}}</a></li>
            {% if notificationList.has_next %}
            <a class="page-link" style ="display:inline-block;" href="?page={{notificationList.next_page_number}}">{{notificationList.next_page_number}}</a>
            <a class="page-link" style ="display:inline-block;" style="display:inline;" href="?page={{notificationList.paginator.num_pages}}">마지막으로</a>
            {% endif %}
        </ul>
        </nav>
    </div>
    <!-- 페이지네이션 끝 -->
    </div>
<footer class="mobile">
    {% include 'playFooter.html' %}
    </footer>
</body>
</html>

